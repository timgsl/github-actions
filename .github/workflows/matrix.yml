name: matrix includes
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        repo: [api, common-services]
        command: [test]
        include:
          - repo: frontend
            command: [test2]
          - repo: common-lib
            command: [test2]
    steps:
      - name: Test ${{ matrix.repo }}
        run: |
          echo matrix '${{ toJSON(matrix) }}'
      - name: diff
        run: |
          git diff @~ | grep -q 'defproject my-repository'
      - name: did the version changed
        if: ${{ success() }}
        run: echo the version changed
